<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video 360 - Hand Tracking - A-Frame</title>
    <script src="js/aframe-master.js"></script>
    <script src="js/aframe/hand-tracking-mesh.js"></script>
    <script src="js/aframe/hand-tracking-gestures-mesh.js"></script>
</head>
<body>
    <a-scene webxr="optionalFeatures: hand-tracking">

        <a-assets>
            <video id="web360" autoplay="true" loop="true" crossorigin="anonymous" playsinline webkit-playsinline
              src="https://cdn.glitch.com/843fbb02-ea2d-45b2-bbd4-6bbecece2b3e%2FSan%20Marcos%20de%20Tarrazu%CC%81.mp4?v=1585324950744">
          </a-assets>

        <a-plane position="0 0 -3" rotation="-90 0 0" width="6" height="6" color="#7BC8A4"></a-plane>


        <a-entity class="hand" hand-tracking-mesh="hand: left" hand-tracking-gestures-mesh></a-entity>
        <a-entity class="hand" hand-tracking-mesh="hand: right" hand-tracking-gestures-mesh></a-entity>

        <a-sky rotation="0 180 0" src="#web360">
            <script>
              var videoEl = document.querySelector('#web360');
              videoEl.currentTime = 0.1;  // Seek to 0 seconds.
              videoEl.pause();
      
              window.addEventListener('click', function () {
                var v = document.querySelector('#web360');
                v.play();
              });
            </script>
          </a-sky>

    </a-scene>
</body>
<script>
    
    let red = 220;
    let green = 180;
    let blue = 50;

    const sphere = document.querySelector("a-sphere");

    const redSlider = document.querySelector("#red-slider");
    redSlider.addEventListener('change', (evt) => {
        var newvalue = Math.round( evt.detail.value);
        red = newvalue
        updateColor();
    });
    const greenSlider = document.querySelector("#green-slider");
    greenSlider.addEventListener('change', (evt) => {
        var newvalue = Math.round( evt.detail.value);
        green = newvalue
        updateColor();
    });
    const blueSlider = document.querySelector("#blue-slider");
    blueSlider.addEventListener('change', (evt) => {
        var newvalue = Math.round( evt.detail.value);
        blue = newvalue
        updateColor();
    });

    const toggle = document.querySelector("#toggle");
    toggle.addEventListener('change', (evt) => {
        sphere.setAttribute("wireframe", evt.detail.active)
    });


    function updateColor() {
        sphere.setAttribute("color", `#${decimalToHex(red) + decimalToHex(green) + decimalToHex(blue)}`);
    }

    updateColor();

    function decimalToHex(d, padding = 2) {
        var hex = Number(d).toString(16);

        while (hex.length < padding) {
            hex = "0" + hex;
        }

        return hex;
    }


</script>
</html>